# 之江仿真项目接口文档

## 目录

[TOC]



# Http

## 获取场景图，物体与房间的邻接关系

http://10.11.81.241:4006/simulator/getThingGraph

请求类型：Post

请求传递类型：Form

请求参数：

| 参数名 | 类型   | 示例                    | 说明   |
| ------ | ------ | ----------------------- | ------ |
| id     | string | Simulator:1700126538734 | 场景ID |

回调

```json
{
    "code": 200,
    "message": "good",
    "success": true,
    "data": {
        "items": [
            {
                "relatedThing": [
                    {
                        "relationship": "in",
                        "target": {
                            "relatedThing": [],
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "Bathtub",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:1004",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ]
                        }
                    }
                ],
                "wallMaterial": 1,
                "rotation": [
                    0.0,
                    0.0,
                    0.0
                ],
                "name": "BathRoom",
                "scale": [
                    1.0,
                    1.0,
                    1.0
                ],
                "dynamic": false,
                "id": "sim:3",
                "position": [
                    0.0,
                    0.0,
                    0.0
                ],
                "floorMaterial": 1
            },
            {
                "relatedThing": [
                    {
                        "relationship": "in",
                        "target": {
                            "relatedThing": [],
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "Bed",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:1003",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ]
                        }
                    }
                ],
                "wallMaterial": 1,
                "rotation": [
                    0.0,
                    0.0,
                    0.0
                ],
                "name": "BedRoom",
                "scale": [
                    1.0,
                    1.0,
                    1.0
                ],
                "dynamic": false,
                "id": "sim:2",
                "position": [
                    0.0,
                    0.0,
                    0.0
                ],
                "floorMaterial": 1
            },
            {
                "relatedThing": [
                    {
                        "relationship": "in",
                        "target": {
                            "relatedThing": [],
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "Book",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:1001",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ]
                        }
                    },
                    {
                        "relationship": "in",
                        "target": {
                            "relatedThing": [],
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "Pot",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:1002",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ]
                        }
                    }
                ],
                "rotation": [
                    0.0,
                    0.0,
                    0.0
                ],
                "name": "LivingRoom",
                "scale": [
                    1.0,
                    1.0,
                    1.0
                ],
                "dynamic": false,
                "id": "sim:1",
                "position": [
                    0.0,
                    0.0,
                    0.0
                ]
            }
        ],
        "sceneID": null
    }
}
```





## 获取环境场景图,房间与房间的邻接关系

http://10.11.81.241:4006/simulator/getEnvGraph

请求类型：Post

请求传递类型：BodyRaw

请求参数：

```json
{
    "id" :"Simulator:1700126538734"
}
```

回调

```json
{
    "code": 200,
    "message": "good",
    "success": true,
    "data": {
        "items": [
            {
                "relatedThing": [
                    {
                        "relationship": "Top",
                        "target": {
                            "relatedThing": [],
                            "wallMaterial": 1,
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "BedRoom",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:2",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "floorMaterial": 1
                        }
                    },
                    {
                        "relationship": "Bottom",
                        "target": {
                            "relatedThing": [],
                            "wallMaterial": 1,
                            "rotation": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "name": "BathRoom",
                            "scale": [
                                1.0,
                                1.0,
                                1.0
                            ],
                            "dynamic": false,
                            "id": "sim:3",
                            "position": [
                                0.0,
                                0.0,
                                0.0
                            ],
                            "floorMaterial": 1
                        }
                    }
                ],
                "rotation": [
                    0.0,
                    0.0,
                    0.0
                ],
                "name": "LivingRoom",
                "scale": [
                    1.0,
                    1.0,
                    1.0
                ],
                "dynamic": false,
                "id": "sim:1",
                "position": [
                    0.0,
                    0.0,
                    0.0
                ]
            }
        ],
        "sceneID": null
    }
}
```



## 提交场景图，物体与房间的邻接关系

http://10.11.81.241:4006/simulator/postThingGraph

请求类型：Post

请求传递类型：BodyRaw参数

请求参数

```
{
    "items": [
        {
            "position": [
                0,
                0,
                0
            ],
            "rotation": [
                0,
                0,
                0
            ],
            "scale": [
                1,
                1,
                1
            ],
            "id": "sim:1",
            "name": "LivingRoom",
            "relatedThing": [
                {
                    "target": {
                        "position": [
                            11.67593,
                            0,
                            10.90751
                        ],
                        "rotation": [
                            0,
                            179.9451,
                            0
                        ],
                        "scale": [
                            1,
                            1,
                            1
                        ],
                        "id": "sim:1001",
                        "name": "TV",
                        "relatedThing": [],
                        "dynamic": false
                    },
                    "relationship": "In"
                },
                {
                    "target": {
                        "position": [
                            12.93581,
                            0,
                            8.106809
                        ],
                        "rotation": [
                            0,
                            271.5397,
                            0
                        ],
                        "scale": [
                            1,
                            1,
                            1
                        ],
                        "id": "sim:1002",
                        "name": "Cabinet",
                        "relatedThing": [],
                        "dynamic": false
                    },
                    "relationship": "In"
                }
            ],
            "dynamic": false,
            "wallMaterial": 0,
            "floorMaterial": 0
        },
        {
            "position": [
                0,
                0,
                0
            ],
            "rotation": [
                0,
                0,
                0
            ],
            "scale": [
                1,
                1,
                1
            ],
            "id": "sim:2",
            "name": "BedRoom",
            "relatedThing": [
                {
                    "target": {
                        "position": [
                            12.98258,
                            0,
                            11.10355
                        ],
                        "rotation": [
                            0,
                            0,
                            0
                        ],
                        "scale": [
                            1,
                            1,
                            1
                        ],
                        "id": "sim:1005",
                        "name": "TV",
                        "relatedThing": [],
                        "dynamic": false
                    },
                    "relationship": "In"
                }
            ],
            "dynamic": false,
            "wallMaterial": 0,
            "floorMaterial": 0
        }
    ],
    "id": "Simulator:1703471583557",
    "idScene": "Simulator:1703471583557",
    "tmpId": "Simulator:1703471583557_1705221586421"
}
```

回调

```json
{
    "code": 200,
    "message": "ok",
    "success": true
}
```



## 改变仿真引擎状态

http://10.11.81.241:4006/simulator/changeSimulatorState

请求类型：Post

请求传递类型：BodyRaw

请求参数：

```
{
    "id":"Simulator:1703471583557",
    "state":"start",
    "tmpId":"Simulator:1703471583557_1705221586421"
}
```

回调：

```
{
    "code": 200,
    "message": "ok",
    "success": true
}
```



## 获取TmpId

http://10.11.81.241:4006/simulator/generateTmpId

请求类型：Post

请求传递类型：BodyRaw

请求参数：

```json
{
    "id" :"Simulator:1700126538734"
}
```

回调：

```json
{
    "code": 200,
    "message": "TMP:Simulator:1703834028110-1703834395636",
    "success": true
}
```



## 获取Web端房间数据列表

http://10.101.80.74:8080/simulation/scene/queryList

请求类型：Get

请求参数：

无

回调：

```json
{
    "recode": 200,
    "msg": "操作成功",
    "data": [
        {
            "flag": 1,
            "createTime": "2023-12-25 10:33:04",
            "thirdChannel": "null",
            "envSimulator": "{\"envSimulator\":{\"envGraph\":[{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"LivingRoom\",\"id\":\"sim:1\",\"floorMaterial\":\"\",\"roomName\":\"LivingRoom-1\"},{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"BedRoom\",\"id\":\"sim:2\",\"floorMaterial\":\"\",\"roomName\":\"BedRoom-2\"},{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"KitchenRoom\",\"id\":\"sim:3\",\"floorMaterial\":\"\",\"roomName\":\"KitchenRoom-3\"},{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"StudyRoom\",\"id\":\"sim:4\",\"floorMaterial\":\"\",\"roomName\":\"StudyRoom-4\"},{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"StorageRoom\",\"id\":\"sim:5\",\"floorMaterial\":\"\",\"roomName\":\"StorageRoom-5\"},{\"relatedThing\":[],\"wallMaterial\":\"\",\"name\":\"BathRoom\",\"id\":\"sim:6\",\"floorMaterial\":\"\",\"roomName\":\"BathRoom-6\"}],\"thingGraph\":[{\"relatedThing\":[{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"TV\",\"id\":\"sim:1001\",\"goodsName\":\"TV-1\"}},{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Cabinet\",\"id\":\"sim:1002\",\"goodsName\":\"Cabinet-1\"}},{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Sofa\",\"id\":\"sim:1003\",\"goodsName\":\"Sofa-1\"}},{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Plant\",\"id\":\"sim:1004\",\"goodsName\":\"Plant-1\"}},{\"relationShip\":\"In\",\"target\":{\"relatedThing\":[],\"name\":\"Sofa\",\"id\":\"sim:1024\",\"goodsName\":\"Sofa-1\"}},{\"relationShip\":\"In\",\"target\":{\"relatedThing\":[],\"name\":\"Sofa\",\"id\":\"sim:1024\",\"goodsName\":\"Sofa-1\"}}],\"wallMaterial\":\"\",\"name\":\"LivingRoom\",\"id\":\"sim:1\",\"floorMaterial\":\"\",\"roomName\":\"LivingRoom-1\"}]}}",
            "id": "Simulator:1703471583557"
        },
        {
            "flag": 1,
            "createTime": "2023-12-25 17:01:44",
            "thirdChannel": "null",
            "envSimulator": "{\"envSimulator\":{\"envGraph\":[{\"relatedThing\":[],\"wallMaterial\":\"6\",\"name\":\"LivingRoom\",\"id\":\"sim:1\",\"floorMaterial\":\"5\",\"roomName\":\"LivingRoom-1\"},{\"relatedThing\":[],\"wallMaterial\":\"1\",\"name\":\"BathRoom\",\"id\":\"sim:2\",\"floorMaterial\":\"1\",\"roomName\":\"BathRoom-2\"},{\"relatedThing\":[],\"wallMaterial\":\"1\",\"name\":\"BedRoom\",\"id\":\"sim:3\",\"floorMaterial\":\"1\",\"roomName\":\"BedRoom-3\"}],\"thingGraph\":[{\"relatedThing\":[{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Sofa\",\"id\":\"sim:1001\",\"goodsName\":\"Sofa-1\"}},{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"TV\",\"id\":\"sim:1002\",\"goodsName\":\"TV-1\"}}],\"wallMaterial\":\"6\",\"name\":\"LivingRoom\",\"id\":\"sim:1\",\"floorMaterial\":\"5\",\"roomName \":\"LivingRoom-1\"},{\"relatedThing\":[{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Bathtub\",\"id\":\"sim:1003\",\"goodsName\":\"Bathtub-2\"}}],\"wallMaterial\":\"1\",\"name\":\"BathRoom\",\"id\":\"sim:2\",\"floorMaterial\":\"1\",\"roomName\":\"BathRoom-2\"},{\"relatedThing\":[{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Bed\",\"id\":\"sim:1004\",\"goodsName\":\"Bed-3\"}},{\"relationShip\":\"in\",\"target\":{\"relatedThing\":[],\"name\":\"Cabinet\",\"id\":\"sim:1005\",\"goodsName\":\"Cabinet-3\"}}],\"wallMaterial\":\"1\",\"name\":\"BedRoom\",\"id\":\"sim:3\",\"floorMaterial\":\"1\",\"roomName\":\"BedRoom-3\"}]}}",
            "id": "Simulator:1703494904334"
        }
    ]
}
```



## 存档

http://10.101.80.74:8080/simulation/history/add

请求类型：Post

请求传递类型：BodyRaw

请求参数：

```json
{
    "sceneID": "Simulator:1703471583557",
    "saveTime": "20231229_150841",
    "dataPackageInfo": {
        "targetList": [
            {
                "key": "m_RoomInfosJson",
                "json": "已经建造的房间信息"
            },
            {
                "key": "m_RoomBaseInfosJson",
                "json": "各个房间之间的邻接关系"
            },
            {
                "key": "m_BorderEntityDatasJson",
                "json": "房间所有边界(墙壁、门、地板、天花板)数据"
            },
            {
                "key": "m_PostThingGraphJson",
                "json": "所有实体位置等信息"
            },
            {
                "key": "m_GetEnvGraphDataJson",
                "json": "环境场景图，房间与房间的邻接关系"
            },
            {
                "key": "m_ListRoomMatData",
                "json": "地面与墙壁材质数据"
            }
        ],
        "target": {
            "key": "",
            "json": ""
        }
    }
}
```

回调：

```json
{
    "recode": 200,
    "msg": "操作成功",
    "data": true,
    "succ": true
}
```



## 读档

http://10.101.80.74:8080/simulation/history/getInfo

请求类型：Get

请求传递类型：Form

请求参数：

| 参数名 | 类型   | 示例                    | 说明   |
| ------ | ------ | ----------------------- | ------ |
| id     | string | Simulator:1700126538734 | 场景ID |

回调：

```json
{
    "sceneID": "Simulator:1703471583557",
    "saveTime": "20231229_150841",
    "dataPackageInfo": {
        "targetList": [
            {
                "key": "m_RoomInfosJson",
                "json": "已经建造的房间信息"
            },
            {
                "key": "m_RoomBaseInfosJson",
                "json": "各个房间之间的邻接关系"
            },
            {
                "key": "m_BorderEntityDatasJson",
                "json": "房间所有边界(墙壁、门、地板、天花板)数据"
            },
            {
                "key": "m_PostThingGraphJson",
                "json": "所有实体位置等信息"
            },
            {
                "key": "m_GetEnvGraphDataJson",
                "json": "环境场景图，房间与房间的邻接关系"
            },
            {
                "key": "m_ListRoomMatData",
                "json": "地面与墙壁材质数据"
            }
        ],
        "target": {
            "key": "",
            "json": ""
        }
    }
}
```



# Mqtt

## 更新全局场景图

/simulator/thingGraph/global

```json
{
    "items" : [
        {
            "position" : [
                0,
                0,
                0
            ],
            "rotation" : [
                0,
                0,
                0
            ],
            "scale"    : [
                1,
                1,
                1
            ],
            "id"       : "sim:1",
            "name"     : "LivingRoom",
            "relatedThing" : [
                {
                    "target" : {
                        "position" : [
                            3,
                            0,
                            7
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1001",
                        "name"     : "Book",
                        "relatedThing" : [
                        ],
                        "dynamic"      : true
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            3,
                            0,
                            9
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1002",
                        "name"     : "Pot",
                        "relatedThing" : [
                        ],
                        "dynamic"      : true
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            7.5,
                            0,
                            10.5
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1001",
                        "name"     : "Toplamp",
                        "relatedThing" : [
                        ],
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            3,
                            0,
                            11
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1002",
                        "name"     : "Bin",
                        "relatedThing" : [
                        ],
                        "dynamic"      : true
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            3,
                            0,
                            6
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "DoorX_0_0",
                        "name"     : "LivingRoomDoor",
                        "relatedThing" : null,
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                }
            ],
            "dynamic"      : false,
            "wallMaterial" : 0,
            "floorMaterial" : 0
        },
        {
            "position" : [
                0,
                0,
                0
            ],
            "rotation" : [
                0,
                0,
                0
            ],
            "scale"    : [
                1,
                1,
                1
            ],
            "id"       : "sim:2",
            "name"     : "BedRoom",
            "relatedThing" : [
                {
                    "target" : {
                        "position" : [
                            0,
                            0,
                            0
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1003",
                        "name"     : "Bed",
                        "relatedThing" : [
                        ],
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            3.5,
                            0,
                            3
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1003",
                        "name"     : "Toplamp",
                        "relatedThing" : [
                        ],
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            0,
                            0,
                            4
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1004",
                        "name"     : "Bin",
                        "relatedThing" : [
                        ],
                        "dynamic"      : true
                    },
                    "relationship" : "In"
                },
                {
                    "target" : {
                        "position" : [
                            3,
                            0,
                            6
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "DoorX_0_0",
                        "name"     : "BedRoomDoor",
                        "relatedThing" : null,
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                }
            ],
            "dynamic"      : false,
            "wallMaterial" : 0,
            "floorMaterial" : 0
        }
    ],
    "id"    : "Simulator:1703835174472",
    "idScene" : "Simulator:1703835174472",
    "tmpId"   : "TMP:Simulator:1703835174472-1703835184463"
}
```



## 更新相机视⻆场景图

/simulator/thingGraph/camera

```json
{
    "items" : [
        {
            "position" : [
                0,
                0,
                0
            ],
            "rotation" : [
                0,
                0,
                0
            ],
            "scale"    : [
                1,
                1,
                1
            ],
            "id"       : "sim:1",
            "name"     : "LivingRoom",
            "relatedThing" : [
                {
                    "target" : {
                        "position" : [
                            7.5,
                            0,
                            10.5
                        ],
                        "rotation" : [
                            0,
                            0,
                            0
                        ],
                        "scale"    : [
                            1,
                            1,
                            1
                        ],
                        "id"       : "sim:1001",
                        "name"     : "Toplamp",
                        "relatedThing" : [
                        ],
                        "dynamic"      : false
                    },
                    "relationship" : "In"
                }
            ],
            "dynamic"      : false,
            "wallMaterial" : 0,
            "floorMaterial" : 0
        },
        {
            "position" : [
                0,
                0,
                0
            ],
            "rotation" : [
                0,
                0,
                0
            ],
            "scale"    : [
                1,
                1,
                1
            ],
            "id"       : "sim:2",
            "name"     : "BedRoom",
            "relatedThing" : [
            ],
            "dynamic"      : false,
            "wallMaterial" : 0,
            "floorMaterial" : 0
        }
    ],
    "id"    : "Simulator:1703835174472",
    "idScene" : "Simulator:1703835174472",
    "tmpId"   : "TMP:Simulator:1703835174472-1703835184463"
}
```



## 接收服务器控制指令

simulator/send

```json
{
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "sceneID": "Simulator:1703835174472",
    "motionId": "motion://WALK",
    "name": "WALK",
    "objectName": "",
    "objectId": "",
    "position": [
        5,
        0,
        8
    ],
    "rotation": [
        0,
        0,
        0
    ],
    "taskId": "task:grab1703835326388"
}
```



## 发控制结果给服务器

simulator/recv

```json
{
    "motionId" : "motion://WALK",
    "name"     : "WALK",
    "stateMsg" : "suc",
    "stateCode" : 0,
    "objectName" : "",
    "simulatorId" : "Simulator:1703835174472",
    "sceneID"     : "Simulator:1703835174472",
    "tmpId"       : "TMP:Simulator:1703835174472-1703835184463",
    "task_id"     : "task:grab1703835326388",
    "targetRoomType" : null
}
```



## 发送房间信息

simulator/roomInfoData

```json
simulator/roomInfoData

{
    "roomInfos" : [
        {
            "id" : "sim:1",
            "roomType" : "LivingRoom",
            "minPos"   : [
                3,
                6
            ],
            "maxPos"   : [
                12,
                15
            ]
        },
        {
            "id" : "sim:2",
            "roomType" : "BedRoom",
            "minPos"   : [
                0,
                0
            ],
            "maxPos"   : [
                7,
                6
            ]
        }
    ],
    "idScene"   : "Simulator:1703835174472",
    "tmpId"     : "TMP:Simulator:1703835174472-1703835184463"
}
```



## 引擎状态

simulator/changeState

```json
{
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "idScene": "Simulator:1703835174472",
    "state": "start"
}
```



## 直播流信息

simulator/liveStreaming_ + 【SceneID】

```json
{
    "sceneID" : "Simulator:1703835174472",
    "tmpId"   : "TMP:Simulator:1703835174472-1703835184463",
    "msgData" : [
        {
            "title" : "FirstCameraVideoStreaming",
            "data"  : "图片二进制数据",
            "width" : 1920,
            "height" : 1080
        },
        {
            "title" : "ThreeCameraVideoStreaming",,
            "data"  : "图片二进制数据",
            "width" : 1920,
            "height" : 1080
        }
    ]
}
```



## 新增房间实体模型

simulator/addGoods

```json
{
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "idScene": "Simulator:1703835174472",
    "entityInfo": [
        {
            "id": "sim:1004",
            "type": "Bed",
            "modelId": "Bed_1",
            "scale": {
                "z": 2,
                "y": 1,
                "x": 2
            },
            "pos": {
                "x": 5,
                "y": 9
            },
            "dynamic": 1,
            "roomInfo": {
                "roomType": "LivingRoom",
                "roomID": "sim:1"
            },
            "putArea": "In",
            "parentEntityInfo": {}
        }
    ]
}
```



## 删除房间实体模型

simulator/delGoods

```json
{
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "idScene": "Simulator:1703835174472",
    "entityInfo": [
        {
            "id": "sim:1003",
            "type": "Bed",
            "delChind": 1
        }
    ]
}
```



## 从Web端获取服务器控制指令

simulator/web/send

```
{
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "sceneID": "Simulator:1703835174472",
    "motionId": "motion://WALK",
    "name": "WALK",
    "objectName": "",
    "objectId": "",
    "position": [
        5,
        0,
        8
    ],
    "rotation": [
        0,
        0,
        0
    ],
    "taskId": "task:grab1703835326388"
}
```



## 机器人指令执行完毕后，结果回调给Web端

simulator/web/recv

```
{
    "motionId" : "motion://WALK",
    "name"     : "WALK",
    "stateMsg" : "suc",
    "stateCode" : 0,
    "objectName" : "",
    "simulatorId" : "Simulator:1703835174472",
    "sceneID"     : "Simulator:1703835174472",
    "tmpId"       : "TMP:Simulator:1703835174472-1703835184463",
    "task_id"     : "task:grab1703835326388",
    "targetRoomType" : null
}
```



## 给web端更新全局场景图，运行时增删物体后回调

/simulator/thingGraph/web/global

```json
{
    "sceneID": "Simulator:1703835174472",
    "tmpId": "TMP:Simulator:1703835174472-1703835184463",
    "entityID": "sim:1003",
    "entityType": "Bed",
    "result": 1,
    "postThingGraph": {
        "items": [
            {
                "position": [
                    0,
                    0,
                    0
                ],
                "rotation": [
                    0,
                    0,
                    0
                ],
                "scale": [
                    1,
                    1,
                    1
                ],
                "id": "sim:1",
                "name": "LivingRoom",
                "relatedThing": [
                    {
                        "target": {
                            "position": [
                                3,
                                0,
                                7
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "sim:1001",
                            "name": "Book",
                            "relatedThing": [],
                            "dynamic": true
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                3.175366,
                                0.8106722,
                                5.634525
                            ],
                            "rotation": [
                                292.9747,
                                111.6287,
                                55.27687
                            ],
                            "scale": [
                                1.000004,
                                1.000005,
                                0.9999994
                            ],
                            "id": "sim:1002",
                            "name": "Pot",
                            "relatedThing": [],
                            "dynamic": true
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                7.5,
                                0,
                                10.5
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "sim:1001",
                            "name": "Toplamp",
                            "relatedThing": [],
                            "dynamic": false
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                3,
                                0,
                                11
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "sim:1002",
                            "name": "Bin",
                            "relatedThing": [],
                            "dynamic": true
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                3,
                                0,
                                6
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "DoorX_0_0",
                            "name": "LivingRoomDoor",
                            "relatedThing": null,
                            "dynamic": false
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                5,
                                0,
                                9
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                2,
                                1,
                                2
                            ],
                            "id": "sim:1004",
                            "name": "Bed",
                            "relatedThing": null,
                            "dynamic": false
                        },
                        "relationship": "In"
                    }
                ],
                "dynamic": false,
                "wallMaterial": 0,
                "floorMaterial": 0
            },
            {
                "position": [
                    0,
                    0,
                    0
                ],
                "rotation": [
                    0,
                    0,
                    0
                ],
                "scale": [
                    1,
                    1,
                    1
                ],
                "id": "sim:2",
                "name": "BedRoom",
                "relatedThing": [
                    {
                        "target": {
                            "position": [
                                3.5,
                                0,
                                3
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "sim:1003",
                            "name": "Toplamp",
                            "relatedThing": [],
                            "dynamic": false
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                0,
                                0,
                                4
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "sim:1004",
                            "name": "Bin",
                            "relatedThing": [],
                            "dynamic": true
                        },
                        "relationship": "In"
                    },
                    {
                        "target": {
                            "position": [
                                3,
                                0,
                                6
                            ],
                            "rotation": [
                                0,
                                0,
                                0
                            ],
                            "scale": [
                                1,
                                1,
                                1
                            ],
                            "id": "DoorX_0_0",
                            "name": "BedRoomDoor",
                            "relatedThing": null,
                            "dynamic": false
                        },
                        "relationship": "In"
                    }
                ],
                "dynamic": false,
                "wallMaterial": 0,
                "floorMaterial": 0
            }
        ],
        "id": "Simulator:1703835174472",
        "idScene": "Simulator:1703835174472",
        "tmpId": "TMP:Simulator:1703835174472-1703835184463"
    }
}
```



## web端的房间布局变更

simulator/changePosition

```
{
    "sceneID": "Simulator:1703835174472",
    "roomType": "BedRoom",
    "roomID": "sim:2",
    "offsetPos": {
        "x": 8,
        "y": 0
    },
    "changeTime": "2023-12-29T07:47:19.471Z"
}
```



## web端自定义相机坐标

simulator/changeViewPositon

```json
{
    "sceneID": "Simulator:1703835174472",
    "pos": [
        3,
        1,
        4
    ],
    "rot": [
        0,
        0,
        0
    ],
    "tmpId": "TMP:Simulator:1703835174472-1703835184463"
}
```